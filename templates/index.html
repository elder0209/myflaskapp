<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Fake News Detector</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container mt-4">
    <h2 class="text-center">Welcome to Fake News Detector</h2>
    <p class="text-end">Hello, {{ name }} | <a href="{{ url_for('logout') }}">Logout</a></p>

    <!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, msg in messages %}
          <div class="alert alert-{{ category }}">{{ msg }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <!-- Submit Article -->
    <h4>Submit an Article</h4>
    <form method="POST" action="{{ url_for('add_article') }}">
        <input type="text" name="title" class="form-control" placeholder="Title" required><br>
        <textarea name="content" class="form-control" placeholder="Content" required></textarea><br>
        <input type="text" name="url" class="form-control" placeholder="URL"><br>
        <input type="date" name="publish_date" class="form-control" required><br>
        <input type="submit" class="btn btn-success" value="Submit Article">
    </form>

    <!-- Report Fake News -->
    <h4 class="mt-4">Report Fake News</h4>
    <form method="POST" action="{{ url_for('report_article') }}">
        <input type="number" name="article_id" class="form-control" placeholder="Article ID" required><br>
        <input type="text" name="reason" class="form-control" placeholder="Reason" required><br>
        <input type="submit" class="btn btn-danger" value="Submit Report">
    </form>

    <!-- Detect Fake News -->
    <h4 class="mt-4">Detect Fake News (Check Trust Score)</h4>
    <form method="POST" action="{{ url_for('check_trust') }}">
        <input type="number" name="article_id" class="form-control" placeholder="Enter Article ID" required><br>
        <input type="submit" class="btn btn-primary" value="Check Trust">
    </form>

    <!-- Check Online Article -->
    <h4 class="mt-4">Check Online Article</h4>
    <form method="POST" action="{{ url_for('check_online') }}">
        <input type="text" name="url_link" class="form-control" placeholder="Enter article URL" required><br>
        <input type="submit" class="btn btn-warning" value="Check Online">
    </form>

    <!-- Safe News -->
    <h4 class="mt-4">Safe News Articles</h4>
    <table class="table table-bordered">
        <tr><th>ID</th><th>Title</th><th>Trust Score</th><th>Publish Date</th></tr>
        {% for article in safe_news %}
        <tr>
            <td>{{ article.article_id }}</td>
            <td>{{ article.title }}</td>
            <td>{{ article.trust_score }}</td>
            <td>{{ article.publish_date }}</td>
        </tr>
        {% endfor %}
    </table>

    <!-- Risky News -->
    <h4 class="mt-4">Risky News Articles</h4>
    <table class="table table-bordered">
        <tr><th>ID</th><th>Title</th><th>Trust Score</th><th>Publish Date</th></tr>
        {% for article in risky_news %}
        <tr>
            <td>{{ article.article_id }}</td>
            <td>{{ article.title }}</td>
            <td>{{ article.trust_score }}</td>
            <td>{{ article.publish_date }}</td>
        </tr>
        {% endfor %}
    </table>

    <!-- Latest Online News -->
    <h4 class="mt-4">Latest Online News</h4>
    <table class="table table-bordered">
        <tr><th>ID</th><th>Title</th><th>Trust Score</th><th>Link</th><th>Date</th></tr>
        {% if latest_online %}
            {% for news in latest_online %}
            <tr>
                <td>{{ news.id }}</td>
                <td>{{ news.title }}</td>
                <td>{{ news.trust_score }}</td>
                <td><a href="{{ news.url }}" target="_blank">Read</a></td>
                <td>{{ news.date }}</td>
            </tr>
            {% endfor %}
        {% else %}
            <tr><td colspan="5" class="text-center">No latest online news available.</td></tr>
        {% endif %}
    </table>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
